<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="Icon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <title>test-site</title>
    <style>
        @font-face{font-family:comicsans;src:url('assets/comicsans.ttf');}
        @font-face{font-family:Hangyaku;src:url('assets/Hangyaku.ttf');}
        @font-face{font-family:cube12;src:url('assets/cube12.ttf');}
        @font-face{font-family:genjuu;src:url('assets/genjuu.ttf');}
        @font-face{font-family:wingdings;src:url('assets/wingdings.ttf');}
        @font-face{font-family:wingdings2;src:url('assets/wingdings2.ttf');}
        @font-face{font-family:wingdings3;src:url('assets/wingdings3.ttf');}
        @font-face{font-family:webdings;src:url('assets/webdings.ttf');}
        @font-face{font-family:kaimetsu;src:url('assets/kaimetsu.otf');}

        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #def0ff;
            border: 2px solid #cfe9ff;
        }

        option {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #def0ff;
            color: #000000;
        }

        html{
            width: 100%;
        }
        #body{
            font-family:comicsans;
            background-color: #f0f8ff;
            margin: 0px!important;
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        #description {
            display: none;
            position: fixed;
            pointer-events: none;
            background-color: rgba(90, 90, 90, 0.9);
            color: rgb(255, 255, 255);
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 1000;
        }

        /*こっからupperUI*/
        #upperUI{
            display: block;
            border-bottom: 3px solid #cfe9ff;
            background-color: #def0ff;
            position: relative;
            top: 0;
            left: 0;
            width: 100%;
            height: 6vh;
            padding: 10px;
            z-index: 997;
        }
        #menuToggle{
            display: block;
            position: absolute;
            right:40px;
            top: 50%;
            transform: translateY(-50%);
            font-size:40px;
            cursor: pointer;
            z-index: 998;
        }
        #login-button{
            display: block;
            position: absolute;
            right: 100px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            padding: 3px;
            border: 2px solid #cfe9ff;
            cursor: pointer;
            z-index: 998;
        }
        #expbar{
            display: none;
            position: absolute;
            width: 50%;
            height: 30px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 998;
            background-color: #4473ad;
            text-align: center;
        }
        #exp{
            position: absolute;
            width:0%;
            height: 24px;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background-color: #365172;
            z-index: 999;
            display: inline-block;
            vertical-align: middle;
        }
        #exptext{
            position:absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 20px;
            color: #f0f8ff;
            display: inline-block;
            vertical-align: middle;
            z-index: 1000;
        }

        /*こっからsideMenu*/
        #sideMenu {
            position: fixed;
            top: 0;
            left: -255px;
            width: 250px;
            height: 100%;
            color: #333344;
            background-color: #def0ff!important;
            border-right: 3px solid #cfe9ff;
            transition: left 0.3s;
            padding-left: 5px;
            z-index:999;
        };
        hr{
            background-color: #cfe9ff;
            border: 2px solid #cfe9ff;
        }
        #sideMenu ul {
            list-style: none;
            padding: 0;
            margin: 0;
            background-color: #def0ff;
        };
        #sideMenu ul li {
            padding: 3px;
        };
        #sideMenu ul li a {
            color: #000000;
            text-decoration: none;
        };
        #sideMenu ul li select{
            background-color: #def0ff;
            border: 1px solid #cfe9ff;
        }
        #sideMenu button {
            background-color: #def0ff;
            border: none;
            color: #000000;
            cursor: pointer;
            text-decoration: none;
            padding: 0;
        }

        #cpopup{
            display: none;
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            max-height: 600px;
            background-color: #eeeeee;
            color:#2b2b2b;
            border: 2px solid #b2b2b2;
            z-index: 999;
            overflow: auto;
        }
        #cpopup ul{
            background-color: #eeeeee;
        }
        #cpopup ul li{
            background-color: #eeeeee;
        }

        #iframe{
            display: none;
            width: 70%;
            height: 80%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            border: 2px solid #ffbb00;
            border-radius: 5px;
            background-color: #f0f8ff;
            overflow: scroll;
            padding:2px;
        }
        #Linkframe2,#Linkframe3,#Linkframe4{
            display: none;
        }
        .iframe-button{
            width: 30px;
            height: 20px;
            border: 1px solid #b2b2b2;
            background-color: #e5ecf2;
            text-align: center;
            appearance: none;
        }

        .toggle{
            width:50px;
            height:20px;
            border: 1px solid #b2b2b2;
            background-color: #e5ecf2;
        }

        .wd{
            display: none;
        }
        #wdcheck{
            cursor: pointer;
            font-size:4px;
            font-family: wingdings!important;
            background-color: #cecece;
        }
        #wdtextarea{
            font-family: wingdings;
        }

        /*ログインのやつ*/
        #login{
            display: block;
            width: 75%;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #def0ff;
            border: 1px solid #b5dcff;
            border-radius: 5px;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.5s ease; 
            z-index: 1234;
        }
        #login input {
            width: calc(100% - 20px);
            margin-bottom: 10px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #b5dcff;
        }
        #login button {
            width: 100%;
            padding: 10px;
            background-color: #cfe9ff;
            border: 2px solid #b5dcff;
            color: #000000;
            font-size: 16px;
            cursor: pointer;
        }
        #login button:hover {
            background-color: #cfe9ff;
        }

        /*タブ切り替えるやつ 実装は未定*/
        #tabs{
            display: block;
            font-size: 35px;
            justify-content: space-between;
            padding: 10px 0;
            background-color: #def0ff;
            position: fixed;
            left:0;
            right:0;
            bottom:0px;
            z-index: 998;
        }
        .tab{
            cursor: pointer;
        }
        #home-tab{
            font-family: webdings;
        }

        /*こっからhome*/
        #home{
            display: block;
            width:100%;
            height: 90vh;
            background-color: #f0f8ff;
            padding-top: 10px;
        }

        #links{
            margin-top: 10px;
            max-height: 300px;
            overflow-y: scroll;
            overflow-x: hidden;
            border: 2px solid #cfecff;
            background-color: #f0f8ff;
            margin-bottom: 20px;
        }

        #memos{
            max-height: 400px;
            overflow-y: scroll;
            overflow-x: hidden;
            border: 2px solid #cfecff;
            background-color: #f0f8ff;
            padding: 15px;
            margin-bottom: 20px;
        }
        .memo{
            width: 400px;
            border: 2px solid #cfe9ff;
            background-color: #f0f8ff;
            margin-bottom: 25px;
            position: relative;
        }
        .m-title{
            width: 400px;
            height: 23px;
            resize: horizontal;
            border-bottom: 2px solid #cfe9ff;
        }
        .m-text{
            width: 400px;
            height: 160px;
            resize: both;
        }
        .m-delete{
            position: absolute;
            top: 1.3px;
            right: 0px;
            cursor: pointer;
            font-family: wingdings; 
            border: 1px solid #cfe9ff;
        }
        .m-delete:hover{
            color: red;
        }
        .m-add{
            width: 400px;
            height: 23px;
            cursor: pointer;
            font-size: 22px;
            text-align: center;
            border: 2px solid #cfe9ff;
        }

        #iframes{
            max-height: 1200px;
            overflow-y: scroll;
            overflow-x: hidden;
            border: 2px solid #cfe9ff;
            margin-bottom: 20px;
        }
        .iframe-frame{
            width: 100%;
            height: 100vh;
            border: 2px solid #cfe9ff;
        }
    </style>
</head>
<body id="body">

    <div id="upperUI">
        <div id="user">
            <div id="Username">no name</div>
            <div id="Level">Lv:#ERROR!</div>
        </div>
        <div id="expbar">
            <div id="exp"></div>
            <div id="exptext">0/NaN</div>
        </div>
        <div id="login-button">login</div>
        
        <div id="menuToggle">☰</div>
    </div>
    <nav id="sideMenu">
        <hr noshade="true">
        <ul>
            <li><input type="checkbox" data-name="links" class="toggles" checked>Links</li>
            <li><input type="checkbox" data-name="memos" class="toggles" checked>Memos</li>
            <li><input type="checkbox" data-name="iframes" class="toggles" checked>Iframes</li>
        </ul>
        <hr noshade="true">
        <ul>
        <li>
            <select id="font-select" onchange="changeFont()">
                <option value="comicsans">comicsans</option>
                <option value="Hangyaku">Hangyaku</option>
                <option value="cube12">cube12</option>
                <option class="wd" value="wingdings">wingdings</option>
            </select>
        </li>
        </ul>
        <hr noshade="true">
        <ul>
            <li><a href="home.html">to home</a></li>
            <li><a href="memo.html">to memo</a></li>
            <li><a href="https://koppepan-orange.github.io/game-site/welcome.html">to game</a></li>
            <li><a href="tools.html">to tools</a></li>
            <li><a href="books.html">to books</a></li>
            <li><a href="hidden.html">to hidden</a></li>
            <li><a href="question.html">to question</a></li>
            <li><a href="en.html">to english-party</a></li>
            <li class="wd"><a href="home-ura.html">to ura</a></li>
        </ul>
        <hr noshade="true">
        <ul>
            <li class="hastxt" data-name="chara+">chara+</li>
            <li class="hastxt" data-name="enemies+">enemies+</li>
        </ul>
        <hr noshade="true">
        <ul>
            <li><span id="wdcheck">HELLO</spanid></li>
        </ul>
    </nav>

    <div id="login">
        <div id="login-form">
            <input type="text" id="username" placeholder="username">
            <input type="password" id="password" placeholder="password">
            <button id="login-login">Login</button>
        </div>
    </div>

    <div id="cpopup"></div>
    <iframe id="iframe"></iframe>
    <div id="description"></div>

    <div id="home">
        <div id="links"></div>
        <div id="memos"></div>
        <div id="iframes"><span align="center">調べれたりするところ</span>
            <details><summary>link site</summary>
                <input type="text" id="LinkInput" placeholder="write link here">
                <button class="iframe-button" onclick="LinkframeGo()">Go</button>
                <select id="LinkSelect" class="iframe-button">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
                <button class="iframe-button">full</button><br>
                <iframe id="Linkframe1" width="100%" height="800" src="about:blank" data-src="about:blank"></iframe>
                <iframe id="Linkframe2" width="100%" height="800" src="about:blank" data-src="about:blank"></iframe>
                <iframe id="Linkframe3" width="100%" height="800" src="about:blank" data-src="about:blank"></iframe>
                <iframe id="Linkframe4" width="100%" height="800" src="about:blank" data-src="about:blank"></iframe>
            </details>
        </div>
    </div>

    <div id="tabs">
        <div id="home-tab" class="tab">H</div>
    </div>

    <script>
        //#region 扱いやすい子達
        function delay(ms){return new Promise(resolve=>setTimeout(resolve,ms));}
        async function NicoNicoText(mes){
            const newDiv = document.createElement('div');
            newDiv.textContent = mes;
            newDiv.style = `
            position: absolute;
            top: ${Math.random()*100}vh;
            right: 0;
            background-color: rgba(228, 249, 255, 0.563);
            color: #000000;
            font-size: 20px;
            `
            document.getElementById('body').appendChild(newDiv);
            //let speed = Math.random()*100+1;
            let speed = mes.toString().length*2 
            for(let i = 0; window.innerWidth > i*speed; i++){
                let val = i*speed;
                newDiv.style.right = `${val}px`
                await delay(50);
            }
            newDiv.remove();
        }

        function displayLocalStorage() {
            const itemCount = localStorage.length;
            for (let i = 0; i < itemCount; i++) {
                const key = localStorage.key(i); // キーを取得
                const value = localStorage.getItem(key); // 値を取得
                NicoNicoText(`キー: ${key}, 値: ${value}`);
            }
        }

        function setLocalStorage(name, value){
            localStorage.setItem(name, value || ""); // 値が空なら空文字を入れる
        }
        function getLocalStorage(name){
            return localStorage.getItem(name);
        }
        
        document.addEventListener('mousemove', (e) => {
        const HasDescription = document.getElementById('description');
        HasDescription.style.left = `${e.clientX + 10}px`;
        HasDescription.style.top = `${e.clientY + 10}px`;
        });

        document.addEventListener('mouseover', (e) => {
        if(e.target.classList.contains('hasd')){
        const description = e.target.dataset.description;
        document.getElementById('description').innerHTML = description;
        document.getElementById('description').style.display = 'block';
        }
        });
        document.addEventListener('mouseout', (e) => {
        if(e.target.classList.contains('hasd')){
        document.getElementById('description').innerHTML = '';
        document.getElementById('description').style.display = 'none';
        }
        });
        //#endregion
        //#region リンクたちの動き
        const Links = {
        'memo':{
            'memosi': {
            id: 'memosi',
            name: 'memo-site',
            href: 'https://koppepan-orange.github.io/test-site/memo.html',
            iframable:1,
            description: 'メモができるサイト。まじで有能<br>ずっと開いてたほうが楽で良き<br>私はゲーム制作の案メモにしてます'
            },
            'files':{
            id: 'files',
            name: 'file-site',
            href: 'https://forest-inlet.github.io/tools/fileTransfer?forestinlet ',
            iframable:1,
            description: 'ファイルを送受信できるサイトです！！<br>まじですごいと思う<br>あ友達作です'
            },
            'browserMemo': {
            id: 'browserMemo',
            name: 'ブラウザメモ帳',
            href: 'http://www.drpartners.jp/tools/browser-memocho.html',
            iframable: 1,
            description: 'メモができるサイト。保有量が大きい'
            },
            'memoWeb': {
            id: 'memoWeb',
            name: 'メモweb',
            href: 'https://memo.onl.jp/?koppepan23',
            iframable:0,
            description: '昔使ってたところ。<br>今はmemo.html使ってるけどね'
            },
            'fileWeb': {
            id: 'fileWeb',
            name: 'ファイルweb',
            href: 'https://file.onl.jp/?koppepan23',
            iframable:0,
            description: 'これは有用ちゃん<br>ファイルを送受信できる<br>そのうち作りたい.....'
            },
            'writebox': {
            id: 'writebox',
            name: 'writebox',
            href: 'https://write-box.appspot.com/',
            iframable:0,
            description: '簡単にhtmlのテストができるサイト<br>けどjsとcssは無効'
            },
        },
        'tool':{
            'tools': {
            id: 'tools',
            name: 'tool-site',
            href: 'https://koppepan-orange.github.io/test-site/tools.html',
            iframable:1,
            description: 'んー..あんまり実用的じゃない子<br>遊び目的。ほぼ<br>けど偏差値とかも測れるよ'
            },
            'books': {
            id: 'books',
            name: 'book-site',
            href: 'https://koppepan-orange.github.io/test-site/books.html',
            iframable:1,
            description: '本が読める子<br>作者は匿名なのでhiddenにでも送ってくれたら載せますよ'
            },
            'hidden': {
            id: 'hidden',
            name: 'hidden-site',
            href: 'https://koppepan-orange.github.io/test-site/hidden.html',
            iframable:1,
            description: '匿名で投稿できるサイト！！！！<br>管理者しか見れないんで<br>定期的にEventは確認して欲しいね'
            },
            'dropbox': {
            id: 'dropbox',
            name: 'dropbox',
            href: 'https://www.dropbox.com/home',
            iframable:0,
            description: '単純に優秀な子<br>ファイルWebよりも持続性が高い<br>ログイン必須'
            },
            'anagram': {
            id: 'anagram',
            name: 'アナグラム生成機',
            href: 'https://anagram.httqs.com/',
            iframable:1,
            description: 'アナグラムを生成してくれる子<br>武器とかの名前はこいつに頼ってもいいかも'
            },
            'roulette': {
            id: 'roulette',
            name: 'ルーレット等生成機',
            href: 'https://jp.piliapp.com/random/wheel/',
            iframable:1,
            description: '名の通り感。<br>他にも乱数とかもいける<br>暇つぶしできるかもね'
            },
            'colorSite': {
            id: 'colorSite',
            name: 'カラーサイト',
            href: 'https://www.color-site.com/',
            iframable:1,
            description: '色の種類を調べれるサイト<br>まじで優秀<br>rgbにも対応'
            },
            'mediaEdit': {
            id: 'mediaEdit',
            name: 'mp3、mp4編集サイト',
            href: 'https://123apps.com/ja/',
            iframable:1,
            description: '動画→音ができるサイト<br>いつも愛用させていただいております<br>かんしゃ〜'
            },
        },
        'make':{
        'scratch': {
        id: 'scratch',
        name: 'scratch',
        href: 'https://scratch.mit.edu/users/koppepan_orange/',
        iframable:0,
        description: '言わずもがな<br>前はここで作ってた..っていう名残<br>でもやってほしい'
        },
        'flat': {
        id: 'flat',
        name: 'flat',
        href: 'https://flat.io/ja',
        iframable:0,
        description: '音楽が比較的簡単に作れるサイト<br>ログイン必須'
        },
        'musescore': {
        id: 'musescore',
        name: 'musescore',
        href: 'https://musescore.com/user/41107809',
        iframable:0,
        description: '楽譜を調べれるサイト<br>人気な曲はありがちだけど<br>そんなそんなな曲はないことが多い'
        },
        'pixnote': {
        id: 'pixnote',
        name: 'pixnote',
        href: 'https://pixnote.net/',
        iframable:1,
        description: '簡単にドット絵が描けるサイト<br>まじで良い<br>ほんとに'
        },
        'pixlate': {
        id: 'pixlate',
        name: 'pixlate',
        href: 'https://www.pixilart.com/koppepanorange',
        iframable:0,
        description: 'ドット絵が描けるサイト2<br>ちょっと複雑だけど自由度は高め'
        },
        'thirtyDollar': {
        id: 'thirtyDollar',
        name: 'thirty dollar',
        href: 'https://thirtydollar.website/',
        iframable:0,
        description: '効果音で音楽を作れるサイト<br>internet overdoseやってる人もいたね'
        },
        },
        'study':{
        'meibo': {
        id: 'meibo',
        name: 'meibo-site',
        href: 'https://true-koppepan-orange.github.io/sub_test-site/meibo_site',
        iframable:1,
        description: '学校の人の一覧を見れるサイト<br>ぜんーーーぜんいないのは内緒のお話'
        },
        'duolingo': {
        id: 'duolingo',
        name: 'duolingo',
        href: 'https://www.duolingo.com/profile/koppepan_orange',
        iframable:0,
        description: '言語が学べるサイト<br>ﾁｮｳﾕｰﾒｲ!ﾔﾊﾞｵ'
        },
        'sushiDa': {
        id: 'sushiDa',
        name: '寿司打',
        href: 'http://typingx0.net/sushida/',
        iframable:0,
        description: 'タイピング競いの定番<br私は苦手です'
        },
        'ankey': {
        id: 'ankey',
        name: 'ankey',
        href: 'https://ankey.io/@koppepanorange',
        iframable:0,
        description: '歌詞とか色々でタイピングができるサイト<br>楽しい<br>好き'
        },
        },
        'sns':{
        'chatSite': {
        id: 'chatSite',
        name: 'chat-site',
        href: 'https://koppepan-orange.github.io/test-site/chat.html',
        iframable:1,
        description: '人と話せるサイト<br>なんJスタイル<br>サイドバーからtwitter2が見れるよ'
        },
        'reddit': {
        id: 'reddit',
        name: 'reddit',
        href: 'https://www.reddit.com/user/koppepan_orange/',
        iframable:0,
        description: '外国掲示板定番のやつ<br>英語しかない<br>絵はほとんど転載<br>まあ常時喧嘩してるtwitterよりはマシ'
        },
        'github': {
        id: 'github',
        name: 'github',
        href: 'https://github.com/koppepan-orange',
        iframable:0,
        description: 'ほんとにいつもありがとね...<br>このサイトもあなたのおかげです'
        },
        'discord': {
        id: 'discord',
        name: 'discord',
        href: 'https://discord.com/channels/@me',
        iframable:0,
        description: 'いつもありがとな、ほんとに<br>感謝してるぜ👍🏻'
        },
        'chatWeb': {
        id: 'chatWeb',
        name: 'チャットweb',
        href: 'https://chat.onl.jp/?koppepan23',
        iframable:0,
        description: 'ちゃんと喋れるいいサイト<br>けどchat.htmlの方が良い'
        },
        'pixiv': {
        id: 'pixiv',
        name: 'pixiv',
        href: 'https://www.pixiv.net/users/93550041',
        iframable:0,
        description: '絵が見れるサイト<br>twitterよりも民度が良い<br>絵師さんの巣窟'
        },
        'twitch': {
        id: 'twitch',
        name: 'twitch',
        href: 'https://www.twitch.tv/koppepan_orange',
        iframable:0,
        description: '配信が見れるサイト<br>いつかはしてみたいねぇ....'
        },
        'instagram': {
        id: 'instagram',
        name: 'instagram',
        href: 'https://www.instagram.com/koppepan_orange/',
        iframable:0,
        description: '2番目に好きなSNS<br>けど最近投稿できてない...'
        },
        'twitter': {
        id: 'twitter',
        name: 'twitter',
        href: 'https://twitter.com/koppepan_orange',
        iframable:0,
        description: '日本で最も人気なSNS<br>色んな界隈が入り混じってて良いけど<br>気抜いたら関係ないやつらが流れ込んでくるのが難点<br>好きだけどね'
        },
        'youtube': {
        id: 'youtube',
        name: 'youtube',
        href: 'https://www.youtube.com/channel/UCFvmwWDRrVqM22icC7QLx1w',
        iframable:0,
        description: '言わずもがな〜な動画投稿サイト<br>たまーーーに投稿してる<br>のばまんさんはおすすめ'
        },
        'litLink': {
        id: 'litLink',
        name: 'lit.link',
        href: 'https://lit.link/koppepanorange',
        iframable:0,
        description: '私についてまとめてあるサイト<br>けど多分このサイトだけで事足りる'
        },
        'kiite': {
        id: 'kiite',
        name: 'kiite',
        href: 'https://kiite.jp/user/koppapan_orange',
        iframable:0,
        description: '音楽が広告なしで見れるサイト<br>ボカロのみ<br>けどニコ動基盤だから学校では無理<br>ガッデム..ってやつ？<br>ベアさんといよわさんはおすすめ'
        },
        'magicalDraw': {
        id: 'magicalDraw',
        name: 'MagicalDraw',
        href: 'https://draw.kuku.lu/pchat.php?hash=898857247',
        iframable:0,
        description: '俗にいう"絵チャ"<br>友達と合作ができる<br>楽しい'
        },
        },
        'game':{
        'gameSite': {
        id: 'gameSite',
        name: 'game-site',
        href: 'https://koppepan-orange.github.io/game-site/welcome.html',
        iframable:1,
        description: 'ゲームができるサイト<br>まじで楽しい<br>clicker-of-mugenはおすすめ<br>cardは未完成だけど絵見て欲しい'
        },
        'musicSite': {
        id: 'musicSite',
        name: 'music-site',
        href: 'https://koppepan-orange.github.io/test-site/music-site.html',
        iframable:1,
        description: '全然できてない<br>kiite-cafeみたいなサイト作ろうとしたんだけどむずい'
        },
        'cybercode': {
        id: 'cybercode',
        name: 'cybercodeonline',
        href: 'https://cybercodeonline.com',
        iframable:0,
        description: '硬派で古き良きMMORPG<br>まじで楽しい..いや人によるかも<br>AFKが充実してて好き'
        },
        'browserGame': {
        id: 'browserGame',
        name: 'browsergame',
        href: 'https://sdin.jp/browser/',
        iframable:0,
        description: '色んなゲームで遊べるサイト<br>カジノ系列もあるよ<br>確かブロック貫通'
        },
        'arealMe': {
        id: 'arealMe',
        name: 'ARealMe',
        href: 'https://www.arealme.com/',
        iframable:0,
        description: '色んなテストができるサイト<br>クリック速度とか反射神経とか'
        },
        'unityroom': {
        id: 'unityroom',
        name: 'unityroom',
        href: 'https://unityroom.com/new_arrivals',
        iframable:0,
        description: '色んな人の作ったゲームで遊べるサイト<br>"ゆめきゃわ"みたいなやつはおすすめ'
        }
        },
        };
        let iframenow = 0;
        Object.keys(Links).forEach(type => {
        const details = document.createElement('details');
        const summary = document.createElement('summary');
        summary.textContent = type;
        details.appendChild(summary);
        details.id = type;
        document.getElementById('links').appendChild(details);

        Object.keys(Links[type]).forEach(key => {
        const link = Links[type][key];
        const a = document.createElement('a');
        a.href = link.href;
        a.textContent = link.name;
        a.id = link.id;
        a.className = 'hasd';
        a.target = '_blank';
        a.setAttribute('data-description', link.description);

        if(link.iframable == 1){
        a.addEventListener('contextmenu', (event) => {
        event.preventDefault();
        if(iframenow == 0){
        iframenow = 1;//なぜか反応してない。Links['memos']の形にするべき？
        const iframe = document.getElementById('iframe');
        iframe.style.display = 'block';
        iframe.src = link.href;
        }else{
        iframenow = 0;
        const iframe = document.getElementById('iframe');
        iframe.style.display = 'none';
        }
        })
        }
        document.getElementById(type).appendChild(a);
        document.getElementById(type).appendChild(document.createElement('br'));
        });
        document.getElementById(type).appendChild(document.createElement('br'));
        })
        //#endregion
        //#region sideMenu
        const menuToggle = document.getElementById('menuToggle');
        const sideMenu = document.getElementById('sideMenu');
        menuToggle.addEventListener('click', () => {
            if(sideMenu.style.left === '0px'){
                sideMenu.style.left = '-255px';
            }else{
                sideMenu.style.left = '0px';
            }
        });


        let cpopup = document.getElementById('cpopup');
        let cpopupNow = 0;
        document.querySelectorAll('.hastxt').forEach((element) => {
            addEventListener('click', (event) => {
                element.addEventListener('click', (event) => {
                    if(cpopupNow == 0){
                        let name = event.target.getAttribute('data-name');
                        console.log(name+'が発動しましたぜぇい')
                        fetch(`assets/txts/${name}.txt`)
                        .then(response => response.text())
                        .then(data => {cpopup.innerText = data;})
                        .catch(error => console.error('Error:', error));
                        cpopup.style.display = 'block';
                        cpopupNow = 1;
                    }else{
                        cpopup.innerHTML = '';
                        cpopup.style.display = 'none';
                        cpopupNow = 0;
                    }
                })
            })
        })

        //change-font
        function changeFont(){
        document.getElementById('body').style.fontFamily = document.getElementById('font-select').value;
        // if(document.getElementById('font-select').value == 'Hangyaku'){
        //     document.getElementById('body').style.fontSize = '23px';
        // }else{
        //     document.getElementById('body').style.fontSize = '17px';
        // }
        if(document.getElementById('font-select').value == 'wingdings'){
        document.getElementById('wdtextarea').style.fontFamily = 'wingdings, kaimetsu';

        }
        }

        //toggle
        document.querySelectorAll('.toggles').forEach((element) => {
            element.addEventListener('change', (event) => {
                if(event.target.checked){
                    document.getElementById(event.target.getAttribute('data-name')).style.display = 'block';
                }else{
                    document.getElementById(event.target.getAttribute('data-name')).style.display = 'none';
                }
            })
        })

        //#endregion
        //#region wingdings特殊機構のお話
        let wdnow = 0;
        document.getElementById('wdcheck').addEventListener('click', () => {
        if(wdnow == 0){
        wdnow = 1;
        document.querySelectorAll('.wd').forEach(element => {
        element.style.display = 'inline';
        })
        }else{
        wdnow = 0;
        document.querySelectorAll('.wd').forEach(element => {
        element.style.display = 'none';
        })
        }
        })
        //#endregion
        //#region iframeのお話
        let Iframes = {
            'bing':{
                id:'bing',
                name:'bing.com',
                src:'https://www.bing.com/search?q=%e6%86%b6%e8%89%af%e3%82%89%e3%81%af%e4%bb%8a%e3%81%af%e7%bd%b7%e3%82%89%e3%82%80%e5%ad%90%e6%b3%a3%e3%81%8f%e3%82%89%e3%82%80%e3%81%9d%e3%82%8c%e3%81%9d%e3%81%ae%e6%af%8d%e3%82%82%e6%88%91%e3%82%92%e5%be%85%e3%81%a4%e3%82%89%e3%82%80%e3%81%9d&qs=RQ&pq=%e6%86%b6%e8%89%af%e3%82%89%e3%81%af%e4%bb%8a%e3%81%af%e7%bd%b7%e3%82%89%e3%82%80%e5%ad%90%e6%b3%a3%e3%81%8f%e3%82%89%e3%82%80%e3%81%9d%e3%82%8c%e3%81%9d%e3%81%ae&sc=4-18&cvid=BDF68943856B40AC93BF5E6E4207F06D&FORM=QBRE&sp=1&ghc=1&lq=0',
            },
            'bing_trans':{
                id:'bing_trans',
                name:'bing-trans',
                src:'https://www.bing.com/translator?from=&to=ja&setlang=ja',
            },
            'deepAI':{
                id:'deepAI',
                name:'deep.ai',
                src:'https://deepai.org/chat',
            },
            
        }
        let NowLinkframe = 1;
        function LinkframeGo(){
            document.getElementById(`Linkframe${NowLinkframe}`).setAttribute('data-src', document.getElementById("LinkInput").value);
            document.getElementById(`Linkframe${NowLinkframe}`).src = document.getElementById("LinkInput").value;
            NicoNicoText('うぇいとふぉあな〜う'); //好きな言葉ランキング上位"wait for now"
        }
        document.getElementById('LinkSelect').addEventListener('change', event =>{
            let Link = `Linkframe${event.target.value}`;

            document.getElementById('Linkframe1').style.display = 'none';
            document.getElementById('Linkframe2').style.display = 'none';
            document.getElementById('Linkframe3').style.display = 'none';
            document.getElementById('Linkframe4').style.display = 'none';

            document.getElementById(Link).style.display = 'block';

            document.getElementById('LinkInput').value = document.getElementById(`Linkframe${event.target.value}`).getAttribute('data-src');
        })
        //#endregion
        //#region DOMContentLoaded -- memos, iframes
        let numberOfMemo = 4;
        document.addEventListener('DOMContentLoaded', () => {
            
            numberOfMemo = +getLocalStorage("numberOfMemo")??4;
            console.log(`メモの数は${numberOfMemo}個やで`);
            for(let i = 1; i <= numberOfMemo; i++){
                let memo = getLocalStorage(`memo${i}`);
                let memoElement = memoCreate(memo, i);
                document.getElementById('memos').appendChild(memoElement);
            }
            let memoAdd = memoAddCreate();
            document.getElementById('memos').appendChild(memoAdd);


            const iframes = getLocalStorage("iframes")??['bing', 'bing_trans', 'deepAI'];
            iframes.forEach(iframe => {
                const details = document.createElement("details");

                const summary = document.createElement("summary");
                summary.textContent = Iframes[iframe].name;

                const button = document.createElement("button");
                button.className = "iframe-button";
                button.dataset.id = `Iframe-${iframe}`;
                button.textContent = "full";

                const br = document.createElement("br");

                const iframeElement = document.createElement("iframe");
                iframeElement.dataset.id = `Iframe-${iframe}`;
                iframeElement.className = "iframe-frame";
                iframeElement.src = Iframes[iframe].src;

                details.appendChild(summary);
                details.appendChild(button);
                details.appendChild(br);
                details.appendChild(iframeElement);

                document.getElementById("iframes").appendChild(details); // 追加したい要素に変更して
            })


            autoLogin();
        });

        function memoCreate(memo,i){
            let memoElement = document.createElement('div');
            memoElement.className = 'memo';
            memoElement.id = `memo${i}`;
            memoElement.setAttribute('data-num', i);

            let title = document.createElement('div');
            title.className = 'm-title';
            title.innerText = `memo${i}`;
            title.setAttribute('contenteditable', 'true');
            memoElement.appendChild(title);

            let text = document.createElement('div');
            text.className = 'm-text';
            text.innerText = memo??'';
            text.setAttribute('contenteditable', 'true');
            memoElement.appendChild(text);

            let deleteButton = document.createElement('div');
            deleteButton.className = 'm-delete';
            deleteButton.innerText = 'M';
            deleteButton.addEventListener('click', () => {
                localStorage.removeItem(`memo${i}`);
                memoElement.remove();

                document.querySelectorAll('.memo').forEach(memo => {
                    let memoNum = +memo.getAttribute('data-num')
                    if(memoNum > i){
                        memo.setAttribute('data-num', memoNum - 1);
                        memo.querySelector('.m-title').innerText = `memo${memoNum-1}`;
                        memo.querySelector('.m-text').innerText = getLocalStorage(`memo${memoNum}`);
                        setLocalStorage(`memo${memoNum-1}`, getLocalStorage(`memo${memoNum}`));
                    }
                });
                
                numberOfMemo = +numberOfMemo - 1;
                setLocalStorage("numberOfMemo", +numberOfMemo);
            });
            memoElement.appendChild(deleteButton);

            memoElement.addEventListener('input', ele => {
                setLocalStorage(`memo${i}`, document.getElementById(`memo${i}`).querySelector('.m-text').innerText);
            });

            return memoElement;
        }
        function memoAddCreate(){
            const memoAdd = document.createElement('div');
            memoAdd.className = 'm-add';
            memoAdd.id = 'memoAdd';
            memoAdd.innerText = '+';
            memoAdd.addEventListener('click', () => {
                memoAdd.remove();
                numberOfMemo = +numberOfMemo + 1;
                setLocalStorage("numberOfMemo", +numberOfMemo);
                let memoElement = memoCreate('', numberOfMemo);
                document.getElementById('memos').appendChild(memoElement);  
                let memoAdd2 = memoAddCreate();
                document.getElementById('memos').appendChild(memoAdd2);
            })
            return memoAdd;
        }
        //#endregion    


        //#region firebaseのいざこざ
        const firebaseConfig = {
            apiKey: "AIzaSyBN5V_E6PzwlJn7IwVsluKIWNIyathhxj0",
            authDomain: "k  oppepan-orange.firebaseapp.com",
            databaseURL: "https://koppepan-orange-default-rtdb.firebaseio.com",
            projectId: "koppepan-orange",
            storageBucket: "koppepan-orange.appspot.com",
            messagingSenderId: "730150198097",
            appId: "1:730150198097:web:076a074a3d406053155170",
            measurementId: "G-MYKJWD203Z"
        };
        firebase.initializeApp(firebaseConfig);
        var database = firebase.database();
        let username = 'no name';
        let usersRef = null;

        //#endregion
        //#region ログイン機構
        document.getElementById('login-button').addEventListener('click', () => {
            if(document.getElementById('login').style.opacity == 0){
                document.getElementById('login').style.opacity = 1;
            }else{
                document.getElementById('login').style.opacity = 0;
            }
        })
        function login(){
            document.getElementById('login').style.display = 'none';
            document.getElementById('login-button').style.display = 'none';
            document.getElementById('expbar').style.display = 'block';

            // document.getElementById('tabs').style.display = 'flex';
            // searchTab.click();
            // nowtab = 'Search';

            usersRef = database.ref('users/'+username);

            usersRef.once('value', function(snapshot){
                if(snapshot.exists()){
                    const userData = snapshot.val();
                    level = userData.level??1;
                    exp = userData.exp??0;
                    maxexp = exp*level+50;
                    updateUI();
                }
            })
        }

        document.getElementById('login-login').addEventListener('click', () => {
            username = document.getElementById('username').value;
            let password = document.getElementById('password').value;

            let kariusersRef = database.ref(`users/${username}`);
            kariusersRef.once('value', function(snapshot){
                if(snapshot.exists()){
                    if(snapshot.val().password == password){
                        setLocalStorage("username", username)
                        login();
                    }
                }else{
                    let usersRef = database.ref(`users/${username}`);
                    usersRef.update({
                        password:password,
                        banned: 0,
                        blocked: [],
                    })
                    NicoNicoText('ようこそ');
                    setLocalStorage("username", username)
                    login();
                }
            })
        })

        function autoLogin(){
            username = getLocalStorage("username");
            if(username){
                console.log("自動ログインしました");
                login();
            }else{
                console.log("ログインしてください");
            }
        }
        //#endregion
        //#region expとか
        let exp = 0;
        let level = 1;
        let maxexp = 50;
        let expbar = document.getElementById('exp');
        let exptext = document.getElementById('exptext');
        function updateUI(){
            if(exp >= maxexp){
                exp -= maxexp;
                level += 1;
                maxexp += 25;
            }
            expbar.style.width = `${exp/maxexp*100}%`;
            exptext.innerText = `${exp}/${maxexp}`
            document.getElementById('Username').textContent = username;
            document.getElementById('Level').textContent = `Lv:${level}`;
        }
        //#endregion
    </script>
</body>
</html>
